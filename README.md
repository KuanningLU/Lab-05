# Lab-05 資料庫正規化設計作業說明

## 目錄
1. [Lab-05_1 圖書館資料庫設計](#lab-05_1-圖書館資料庫設計)  
2. [Lab-05_2 線上商店訂單系統](#lab-05_2-線上商店訂單系統)  
3. [Lab-05_3 大學課程註冊系統](#lab-05_3-大學課程註冊系統)  

---

## Lab-05_1 圖書館資料庫設計

### 一、正規化過程與理由

- **第一正規化 (1NF)**  
  拆分「作者」欄位中多作者為獨立「作者」表與「書籍_作者」關聯表，確保欄位原子性。  

- **第二正規化 (2NF)**  
  消除部分函數相依，將會員、書籍、出版社資訊獨立成表，避免資料重複與更新異常。  

- **第三正規化 (3NF)**  
  處理傳遞函數相依，將出版社名稱與地址拆成獨立出版社表。

- **BCNF（選擇性）**  
  確認所有函數相依決定因素為候選鍵，進一步消除異常。

### 二、函數相依性列表

- ISBN → 書名、出版年份、出版社名稱、書籍類別  
- 出版社名稱 → 出版社地址  
- 會員卡號 → 會員姓名、地址、電話、Email  
- (會員卡號, ISBN, 借閱日期) → 應還日期、實際歸還日期

### 三、最終 ERD

已使用 dbdiagram.io 工具繪製，實體及關聯設計符合 3NF 及 BCNF 要求。

---

## Lab-05_2 線上商店訂單系統

### 一、正規化過程與理由

- **第一正規化 (1NF)**  
  訂單中多產品資料拆分為訂單明細表（OrderItem），欄位皆為原子值。  

- **第二正規化 (2NF)**  
  顧客與供應商資料獨立成表，避免訂單表中重複資料。

- **第三正規化 (3NF)**  
  消除供應商名稱決定聯絡方式的傳遞依賴，獨立供應商表。

### 二、函數相依性列表

- 顧客ID → 顧客姓名、Email、電話、地址等  
- 產品ID → 產品名稱、描述、單價、庫存、供應商名稱、聯絡方式  
- 供應商名稱 → 聯絡方式  
- 訂單ID → 顧客ID、訂單日期、總金額  
- (訂單ID, 產品ID) → 購買數量、單價

### 三、SQL 建表及測試資料

- SQL 檔包含 `CREATE TABLE` 與 `INSERT INTO` 語法，建立完整資料表並插入測試資料。

### 四、查詢語法

- 包含查詢特定顧客訂單、特定訂單明細、產品銷售數量及最高消費顧客。

---

## Lab-05_3 大學課程註冊系統

### 一、正規化過程與理由

- **第一正規化 (1NF)**  
  拆分學生、科系、課程、講師欄位，保證欄位原子性。  

- **第二正規化 (2NF)**  
  消除部分函數相依，建立獨立資料表管理系所及人員資訊。  

- **第三正規化 (3NF) / BCNF**  
  依系統複雜度選擇 BCNF 或 3NF，透過 `CourseOffering` 表維護課程-學期-講師關聯。

### 二、函數相依性列表

- 學號 → 學生姓名、主修科系名稱  
- 主修科系名稱 → 辦公室地點  
- 課程代碼 → 課程名稱、學分、開課系所代碼與名稱  
- 開課系所代碼 → 開課系所名稱  
- 講師編號 → 講師姓名、所屬系所代碼與名稱、辦公室號碼  
- (學號, 課程代碼, 學期, 講師編號) → 成績  
- (課程代碼, 學期, 講師編號) → 講師姓名

### 三、SQL 建表語法

- 包含完整 CREATE TABLE 陳述式，確保複合主鍵及外鍵關係完整。

### 四、設計挑戰及決策

- BCNF 確保無異常，但增加系統複雜度，依需求可選擇退回 3NF。  
- `CourseOffering` 實作課程授課多對多關係，符合業務邏輯。



